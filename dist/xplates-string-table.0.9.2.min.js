/** XPlatesStringTable version 0.9.2
  * @license MIT
  * @preserve 
 **/
var XPlatesStringTable=module.exports;XPlatesStringTable.parseIntoBundleSync=function(e,t,r){function n(){u&&(i&&(f=f.trim()),c=c?c.split(","):[],p&&e(d,'<% var a=arguments,p="'+p+'$",f=p+k,out=this[f]?this[f].apply(this,Array.prototype.slice.call(a,1)):this[p+"__default"].apply(this,a); %>',["k"],p,t),e(d,f,c,u,t),u=f=p=c=d=null)}var a=t.prefix||"",i=void 0===t.trim||t.trim,l=void 0===t.comments||t.comments,s=(t||{}).language||"text",o="undefined"!=typeof Buffer&&r instanceof Buffer?r.toString():r;if("string"!=typeof o)throw new Error("Can only parse a string or Buffer object!");l&&(o=o.replace(/(^|\s+)\/\/.*/g,""));for(var u,f,p,c,d,g=o.split(/\r?\n/),S=0;S<g.length;S++){var y=!1,b=g[S];a&&b.substr(0,a.length)===a&&(y=!0,b=b.substr(a.length));var m=b.match(/^(([\w\d]+):)?(([\w\d]+)(\$([\w\d]+))?)(\(([^)]*)\))?:(.*)/);if(!m||a&&!y){if(a&&y&&!m)throw new Error("XPlatesStringTable parse error, bad template on line "+(S+1));u&&(i&&(b=b.trim()),f+="\n"+b)}else n(),d=m[2]||s,u=m[3],p=m[5]?m[4]:null,f=m[9].trim(),c=m[8]}n()},XPlatesStringTable.parseIntoBundle=function(e,t,r,n){setImmediate(function(){try{XPlatesStringTable.parseIntoBundleSync(e,t,r)}catch(e){return void n(e)}n(null)})},XPlatesStringTable.parseFileIntoBundle=function(e,t,r,n){require("fs").readFile(r,function(r,a){if(r)return n(r);XPlatesStringTable.parseIntoBundle(e,t,a,n)})},XPlatesStringTable.parseFileIntoBundleSync=function(e,t,r){var n=require("fs").readFileSync(r);return XPlatesStringTable.parseIntoBundleSync(e,t,n)},XPlatesStringTable.getMapKeys=function(e){var t={};for(var r in e){var n=r.match(/^([\w\d]+)\$([\w\d]+)$/);n&&(t[n[1]]=t[n[1]]||[],"__default"!==n[2]&&t[n[1]].push(n[2]))}return t},XPlatesStringTable.addKeyFunctions=function(e){var t=XPlatesStringTable.getMapKeys(e);for(var r in t)e("text","<% out="+JSON.stringify(t[r])+"%>",[],r+"__keys")};